<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
  lang="en-GB" xml:lang="en-GB">
  <head>
    <title>Web Technologies Assignment 1 Report - Luke Mitchell and Josh Hargreaves</title>
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="styles/main.css" />
    <link rel="stylesheet" href="styles/content.css" />

    <style type="text/css">
      div .report-image {
        max-height: 200px;
        overflow: hidden;
      }

      img .report-image {
        max-width: 100%;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="spacer"></div>
      <div class="well">
        <!-- Title -->
        <h1><a id="top" class="anchor">Web Technologies Assignment 1 Report</a></h1>
        <h3>Luke Mitchell and Josh Hargreaves</h3>
        <hr />
        <!-- end of Title -->

        <!-- Abstract -->
        <h3><a id="abstract" class="anchor">Abstract</a></h3>
        <p>This report describes the submission of Luke Mitchell and Josh Hargreaves for the first assignment of the Web Technologies unit. Our submission is a web application that allows a user to create an online wallet that enables them to send and receive MaxCoin, a Bitcoin-like cryptocurrency that we developed earlier this year.</p>
        <p>Firstly, what is MaxCoin? MaxCoin is a cryptographic currency based upon the Bitcoin model. We created the currency to experiment with using algorithms with increased security that will enable us to utilise some very new technology, courtesy of Nigel Smart, and also to see what the effect of a media personality would have on the price of an altcoin. The coin was launched on the Keiser Report, a programme presented by Max Keiser, a proponent and namesake of the coin.</p>
        <p>This submission shows the framework and the front end of the web application. We have tried to include sample data to give a realistic impression of what the final experience will be like, when using the website.</p>
        <hr />
        <!-- end of Abstract -->

        <!-- Contents -->
        <h3><a id="sections" class="anchor">Sections</a></h3>
        <ol>
          <li><a href="#introduction" title="Jump to Introduction">Introduction</a></li>
          <li><a href="#keyfeatures" title="Jump to Key Features">Key Features</a></li>
          <ol>
            <li><a href="#angularjs" title="Jump to Angular JS">Angular JS</a></li>
            <li><a href="#responsivedesign" title="Jump to Responsive Design">Responsive Design</a></li>
            <li><a href="#seo" title="Jump to Search Engine Optimisation">Search Engine Optimisation</a></li>
          </ol>
          <li><a href="#content" title="Jump to Website Content">Website Content</a></li>
          <ol>
            <li><a href="#html" title="Jump to HTML">HTML</a></li>
            <li><a href="#css" title="Jump to CSS">CSS</a></li>
            <li><a href="#javascript" title="Jump to JavaScript">JavaScript</a></li>
            <li><a href="#svg" title="Jump to SVG">SVG</a></li>
            <li><a href="#gimp" title="Jump to GIMP">GIMP</a></li>
          </ol>
          <li><a href="#ee" title="Jump to Everything Else">Everything Else</a></li>
        </ol>
        <hr />
        <!-- end of Contents -->
        
        <!-- Introduction -->
        <div>
          <h3><a id="introduction" class="anchor">Introduction</a></h3>
          <p>The application we have developed is called maxwallet. As explained in the abstract, the aim of maxwallet is to allow users to create a "web wallet", an online interface that allows them to access their MaxCoin and to send it to other users or merchants. The advantage of using a web wallet is threefold: users don't have to download a piece of software which, additionally, downloads the blockchain - the public ledger of all the transactions within MaxCoin; users can access their wallet from anywhere, worldwide, with an Internet connection; and, finally, it allows additional functionality to be included, such as the Standing Orders present within maxwallet, a feature that the desktop client doesn't have.</p>
          <p>Currently only a small handful of cryptocurrencies have web wallet services and it will be a great boon to MaxCoin once the service is launched. Additionally, we have taken great care to ensure the codebase is written in a modular manner so that it can be ported with ease to other currencies. Due to the financial nature of the web application, we have been vigilant to ensure that our code is as secure and well written as possible. If the service was to be hacked it would immediately lose it's credibility and become a detriment to the currency.</p>
          <p>Existing services for storing and handling cryptocurrency online include <a target="_blank" href="http://www.blockchain.info/">blockchain.info</a> and <a target="_blank" href="https://secure.dogechain.info/wallet">dogechain.info</a>; these services typically allow a user to send and receive currency. With maxwallet, we will build upon this functionality by including the option to create regular payments to an address and to submit payment requests, much like a regular bank. We will also fully integrate with the upcoming MaxCoin Android wallet by allowing a user to interface with the web application using QR codes that we will both generate and read, using the client's camera.</p>
        </div>
        <!-- end of Introduction -->

        <span class="text-muted">Back to <a href="#top">top</a></span>
        <hr />

        <!-- Key Features -->
        <div>
          <h3><a id="keyfeatures" class="anchor">Key Features</a></h3>
          <p>web app with wallet, transaction history and details, address book, recurring payments, log in system (not yet implemented), support tickets and knowledgebase, QR generator and reader, modal windows and toasts</p>

          <div class="spacer" />

          <!-- Angular JS -->
          <h4><a id="angularjs" class="anchor">Angular JS</a></h4>
          <p>For this project we decided that we would use <strong>AngularJs</strong>. Angular is an open-source javascript
            MVC framework maintained by Google that assists in the making of single page applications. From doing research and experimenting with Angular, as well as other frameworks such as EmberJs, we concluded that Angular was the best fit in aiding us make a single page dynamic web application. Other frameworks deal with HTML's shortcomings by abastracting away HTML, CSS and/or javascript or by providing an imperitive way for manipulating the DOM. However none of these methods address the problem that HTML was simply not designed for dynamic views. AngularJs overcomes this by allowing you to extend the HTML vocabulary of your application. 
            <!--We could havemade such an application purely with JQuery and Ajax, however we saw real power in Angular's two way data-binding and templating that was just too great to ignore. We also felt that for the 'value added' part of this coursework we would prioritise adding functionality rather than reinventing the wheel.-->
          </p>
          <p>The first thing we looked to do with Angular was to enable navigation between pages without any reloads i.e. lay the foundations for a single page app. </p>

          <p> In AngularJs directives are markers on a DOM element (such as an attribute, element name, or CSS class) that tell AngularJS's HTML compiler to attach a specified behavior to that DOM element or transform the DOM element and its children. One of the directives that comes bundled with Angular is <i>ng-view</i>. When you set up the routing in angular with <i>ng-view</i>, you specify the HTML template Angular should load when asked for a particular URL. You typically add the <i>ng-view</i> attribute to an empty div which is to hold the main body of your content, and this is where Angular will inject the HTML template specified by your routing.</p>

          <p>We however found the <i>ng-view</i> directive to be a bit limiting as it is not possible to nest views within each other with it. However we went away and researched possible solutions and ended up quickly coming accross a popular Angular module called <i>ui-router</i>. <i>Ui-router</i> gave us exactly what we were looking for; the ability to new views with each other. <i>Ui-router</i> works very similarly to AngularJs' router but it focuses purely on the state of the application. The routing is logically pretty similar to Angulars default router except now you're providing templates for particular states, and within the application you link to states rather than urls. However the thing we're intersted in is the abilty to construct a state hierachy, i.e. parent/child states aka nested states. In our application for example, this enables us to have a <i>wallet</i> state, and then have child states of <i>wallet</i> such as <i>send</i>, <i>recieve</i> etc.</p>

          <p>Once we had got our heads around the basic components of AngularJs and the <i>ui-router</i> specific directives for routing, we were left with everything we needed to create a basic 'one page application' with nested states. One thing we struggled with was making it so when you were in some child state of a state such as wallet (a state for when the wallet tab in the navbar was clicked), the wallet tab was still toggled as selected in the nav bar. We looked at how the <i>ui-router</i> sample application did this, however we found out that it too was using the same method as we but with no success. After much searching, we finally found the fix and also ended up submitting the fix as a pull-request the <i>ui-router</i> git repository</p>.

          <p>The next thing we set out to do was create a reusable AngularJs modal window directive. One of the idiums of AngularJs is that directives should be generic and reusable. A modal window in most cases can be said to have 3 components; the overlay behind the window, the window itself and the content. So ideally the directive that we construct for the modal window will always contain the same overlay and window but it'll just be the content inside the window that we change. Angular directives have a mind-boggling amount of options; one of them transclude. When transclude is set to true, and a template is provided within the directive, the content inside the element with the directive attribute, in this case our modal window directive attribute, is inserted into the element in the template with the <i>ng-transclude</i> attribute (only one of these is allowed in the template). This is exactly what we want. In our template we can put the overlay class and a window class, and specify with the <i>ng-transclude</i> attribute where we want our custom content to be inserted inside our template. To show and hide the modal window we can use the native angular directive <i>ng-show</i> which when assigned an expression which evaluates to true will hide itself and its children. If we have a variable such as <i>modalShown</i> which is initially set to false within our current scope, we can set a button to perform a function call which toggles the value of <i>modalShown</i> using the attribute <i>ng-click</i>. N.B that the difference between <i>on-click</i> and <i>ng-click</i> is that <i>ng-click</i> performs actions on the current scope. </p>

          <p> Controllers in AngularJs give us the really nice feature of encapsulation; anything in the HTML contained within an element with the attribute <i>ng-controller="someController"</i> will have access to its scope</i>. Controllers are where you set up the intial state of the $scope object. In the case of the modal window, it's where we we set intially set <i>modalShown</i> equal to false. The element with the <i>ng-show</i> attribute will need to evaluate the<i>modalShown</i> value on the "someController" scope for everything to work correctly. This fundamentally means that it needs to be contained within an element with the attribute <i>ng-controller="someController"</i>.</p>
          <p>
              Now that we had created a modal window directive that we can populate with arbitrary content, it seemed logical for us to create a login form. The login form was to have an input field for both an email address and passsword. We decided to override the default HTML5 form validation error messages with our own as the HTML5  error messages didn't fit in that well theme wise with the rest of our site. Whenever you create a form within an angular application, it is actually an instance of an angular Controller <i>FormController</i>. Forms of instance FormController have their own scope which has a lot of useful properties on it. FormController lets you use attributes to specify whether a particular field is required, whether it has been left untouched, maximum and minimum valid length as well as a few other useful attributes that will set corresponding values on the scope indicating validity. This means that we can easily create nicely styled error messages by using <i>ng-show</i> to show and hide error messages based on what the user has entered. For example we could use <i>ng-show</i> in the following way to display to display unhide an element if the user has entered data in an input field and the data isn't valid where <i>userForm</i> is the name of the form and <i>password</i> is the name of the text field: <i>data-ng-show="userForm.password.$invalid &amp;&amp; !userForm.password.$pristine".</i> We also can check whether the entire form is valid using <i>userForm.$invalid</i>. Using this property we were able to disable the login button button of the login form until the user has entered a valid email and password. We have used similar form validation elsewhere in our application for other forms. Interestingly on the most up to date build version of angular, native number validation is broken, so we're likely going to have to implement the validation ourselves or even try and fix the native angular validation and submit a pull-request.
          </p>
          <p>

          </p>


           N.B. that normal URL based routing is still fully supported. 

          <div class="spacer" />

          <!-- Responsive Design -->
          <h4><a id="responsivedesign" class="anchor">Responsive Design</a></h4>
          <p>The website we have created is fully responsive, working from all sizes of device from a widescreen, full HD screen (and larger) to a small mobile phone. The style sheets employed describe the widths as either percentages, for wrapping elements and containers, or ems, for anything related to text. Due to the use of a "sticky footer" and a "floating header", we have used pixel values in these areas; we have, however, used the <code>@media</code> CSS attributes to allow these to scale with the screen size.</p>
          <p>Certain components display completely differently when presented at different screen resolutions. One example of this is the navigation bar in the page header: this is normally a horizontal bar containing navigation items but, at screen resolutions below 768px, this is displayed as a single menu icon. When the menu icon is clicked it toggles a drop down menu containing the navigation links, conserving space on mobile devices. Another example is the tables within the Wallet section of the website: this section features a number of wallets containing information on transactions and addresses, each of which are stored in a tabular format. The tables are styled such that when they begin to overflow the surrounding element they contract and display a horizontal scroll bar instead.</p>
          <p>Below are some images showing the website being displayed at multiple resolutions.</p>

          <div class="spacer" />

          <!-- images at different resolutions -->
          <div class="row">
            <div class="col-sm-4 report-image">
              <a href="images/report/keyfeatures/1.png" title="The default style of the website on a widescreen browser"><img class="report-image" src="images/report/keyfeatures/1.png" alt="The default style of the website on a widescreen browser"></img></a>
            </div>

            <div class="col-sm-4 report-image">
              <a href="images/report/keyfeatures/2.png" title="The table element with a scroll bar, shown on a resized browser"><img class="report-image" src="images/report/keyfeatures/2.png" alt="The table element with a scroll bar, shown on a resized browser"></img></a>
            </div>

            <div class="col-sm-4 report-image">
              <a href="images/report/keyfeatures/3.png" title="The menu button shown on a mobile device"><img class="report-image" src="images/report/keyfeatures/3.png" alt="The menu button shown on a mobile device"></img></a>
            </div>
          </div>
          <p><span class="text-muted">Hover over the images for a description. You can click on the images for a higher resolution.</span></p>
          <!-- end images -->

          <p>On the home page of the website there is a "carousel", a series of 3 images than are animated and will cycle between themselves, each displaying a different message on a floating <code>div</code> element. The images displayed by the carousel are resized for a variety of common screen dimensions, from VGA to Full HD. These tailor the dimensions of the displayed image and also the source image to display; when a lower resolution is required a smaller image is served, reducing the amount of data required and saving the bandwidth of mobile users. There are 4 images of varying resolutions for this purpose. The styling for this can be found in content.css.</p>
          <p>We continually tested our website using a multitude of different browsers during development, in an effort to support as many as possible. Our website uses several HTML5-specific features (see <a href="#html" title="Go to HTML section">HTML</a>), along with several other features that aren't supported in older browsers, but we have attempted, where possible, to use the modernizr library to detect and substitute these for suitable replacements. One example of where modernizr is used is for SVG detection in the Send Funds section of the Wallet. Here an SVG of a camera (see <a href="#svg" title="Go to SVG section">SVG</a>) is used as a button icon; when modernizr detects a browser that cannot display SVG a fallback PNG image is used.</p>
          <p>When testing, we used <a href="browsershots.org" title="Go to BrowserShots">browsershots.org</a> to view our website as displayed by over 100 different browsers of varying ages on a variety of platforms. Additionally, we developed using Google Chrome, Chromium, Firefox and Internet Explorer to ensure that our website was as cross-platform complient as possible. The results of submitted our final site to BrowserShots was very positive, with almost all of the browsers displaying the website correctly.</p>
          <p>According to <a href="http://www.w3schools.com/browsers/browsers_stats.asp" title="Browser statistics">w3schools</a> over 50% of the web is browsed using recent versions of Chrome, with a further 25% using recent versions of Firefox. We support both of these browsers, including very old versions of them (we've tested back to version 10 for both, see below) along with Opera and a host of Linux-specific browsers, and are compatible with all of them. Some older browsers, such as IE6, and text-based browsers such as Lynx do not work as expected with maxwallet, however these represent a fractional amount of traffic on the web (around <a href="http://www.w3schools.com/browsers/browsers_explorer.asp" title="IE traffic by version">0.5% at worst</a>). To deal with this, we print an error message for older browsers using a CSS conditional comment.</p>
          <p>Some images of the home page running on a variety of early browsers, from BrowserShots, can be seen below.</p>          

          <div class="spacer" />

          <!-- images on different browsers -->
          <div class="row">
            <div class="col-sm-4 report-image">
              <a href="images/report/browsershots/chrome-10.png" title="Chrome 10 (current version is 34)"><img class="report-image" src="images/report/browsershots/chrome-10.png" alt="Chrome 10 (current version is 34)"></img></a>
            </div>

            <div class="col-sm-4 report-image">
              <a href="images/report/browsershots/firefox-10.png" title="Firefox 10 (current version is 27)"><img class="report-image" src="images/report/browsershots/firefox-10.png" alt="Firefox 10 (current version is 27)"></img></a>
            </div>

            <div class="col-sm-4 report-image">
              <a href="images/report/browsershots/opera-10.png" title="Opera 10 (current version is 20)"><img class="report-image" src="images/report/browsershots/opera-10.png" alt="Opera 10 (current version is 20)"></img></a>
            </div>
          </div>
          <p><span class="text-muted">Hover over the images for a description. You can click on the images for a higher resolution.</span></p>
          <!-- end images -->

          <p>A final responsive element to our website is the dynamic resizing of YouTube videos. This was done in such a way that the aspect ratio of the video is maintained at 16:9, the ratio most videos use. This was achieved by wrapping the video <code>iframe</code> within a <code>div</code> and setting the padding to maintain the correct proportions using <code>padding-bottom: 56.25%;</code>. The About page features a YouTube video that uses this feature.</p>
          <!-- end of Responsive Design -->

          <div class="spacer" />

          <!-- Search Engine Optimisation -->
          <h4><a id="seo" class="anchor">Search Engine Optimisation</a></h4>
          <p>Our website is being designed for real-world deployment and, as such, we have included features such as Search Engine Optimisation. The index page of the website contains meta tags with keywords, a description and the authors. The index page injects the content of other pages into itself, meaning it will be the most frequently crawled and thus the most important. When the back-end is implemented, meta tags for other pages can be modified using JavaScript. We have also submitted a <code>robots.txt</code> file; this is used by web-crawlers such as Googlebot to determine where to crawl and index pages, along with where not to go. The robots file also contains a link to our XML Sitemap. The Sitemap, <code>sitemap.xml</code>, describes the change-frequency and the index priority of the pages within the website, along with allowing isolated pages to be indexed. Both our robots file and the Sitemap conform to the relevant standards and could be submitted to most modern search engines as they are.</p>
          <p>Once the back-end of the website has been implemented, we will also include automatically-updating HTML "snapshots" of the dynamic content on the website, or that injected using JavaScript. This will allow these pages to be crawled by a traditional web-crawler and they will be added to the Sitemap when they are in place.</p>
        </div>
        <!-- end of Key Features -->

        <span class="text-muted">Back to <a href="#top">top</a></span>
        <hr />

        <!-- Website Content -->
        <div>
          <h3><a id="content" class="anchor">Website Content</a></h3>
          <p></p>

          <!-- HTML -->
          <h4><a id="html" class="anchor">HTML</a></h4>
          <p>We opted to use HTML5 when writing maxwallet as it offers a range of useful features, such as the embedding of video, canvas elements and useful tag such as footer. We also felt that using the most up-to-date version was the most beneficial with regards to improving our skill set as web developers.</p>
          <p>The HTML5-specific tags that we utilise are the <code>footer</code> tags, allowing for cleaner, more readable code; the <code>svg</code> tag to embed vector graphics such as the camera icon (see <a href="#svg" title="Go to SVG">SVG</a>); and, finally, the <code>canvas</code> tags, for creating the QR code within the Receive Funds section of the Wallet.</p>
          <p>All the code used within the web application conform to HTML5 guidelines specified by the W3C and pass the W3C <a href="http://validator.w3.org/" title="Visit the W3C online validator">online validator</a>. A picture of the validation can be seen below.</p>
          <!-- end of HTML -->

          <div class="spacer" />

          <!-- image of html5 validation -->
          <div class="row">
            <div class="col-sm-4 report-image">
              <a href="images/report/validation/html5.png" title="Successful HTML5 validation"><img class="report-image" src="images/report/validation/html5.png" alt="Successful HTML5 validation"></img></a>
            </div>
          </div>
          <p><span class="text-muted">You can click on the image for a higher resolution.</span></p>
          <!-- end image -->

          <div class="spacer" />

          <!-- CSS -->
          <h4><a id="css" class="anchor">CSS</a></h4>
          <p></p>
          <p>nth-child, custom theme for bootstrap, all stylesheets are valid css3, fallback for mobile devices and multiple screen sizes, fallback support where possible</p>
          <!-- end of CSS -->
  
          <div class="spacer" />

          <!-- image of css3 validation -->
          <div class="row">
            <div class="col-sm-4 report-image">
              <a href="images/report/validation/css3.png" title="Successful CSS3 validation"><img class="report-image" src="images/report/validation/css3.png" alt="Successful CSS3 validation"></img></a>
            </div>
          </div>
          <p><span class="text-muted">You can click on the image for a higher resolution.</span></p>
          <!-- end image -->

          <div class="spacer" />

          <!-- JavaScript -->
          <h4><a id="javascript" class="anchor">JavaScript</a></h4>
          <p>qr codes (rewrote qrcode.js to be valid XHTML/HTML5 and submitted pull request to github repo), show and hide current price of maxcoin, cross-site requests, loads of angular, scrolling, modal window, toasts</p>
          <!-- end JavaScript -->

          <div class="spacer" />

          <!-- SVG -->
          <h4><a id="svg" class="anchor">SVG</a></h4>
          <p>We employed Inkscape to create 2 SVG graphics. One of these, a camera icon, was created for use as a button on the Send Funds section of the Wallet; the other, an outline of an envelope, was imported into GIMP and used an image on the Contact page.</p>
          <p>The camera icon was created solely within Inkscape. It was created by first making the lens using concentric circles, each with a small gap between it and the outer circle, varying the width of their strokes to create the effect of a zoomed camera lens. The centre of the lens was then given a radial blur and a highlight, using a low-opacity white layer that has been shaped using a Boolean difference operation. The rest of the camera was made using rectangles with a curved stroke, in varying shades. A line across the camera body was added for some interest and given a shadow, by duplicating it, moving it slightly down and right, then lowering the opacity. The same was done for the camera lens to create some depth. Finally, a highlight was given to the camera viewport in the same way that the highlight to the lens was created.</p>
          <p>The envelope was a much simpler creation as it was to be modified within GIMP. The envelope was created by using the rectangle tool to create the basic shape, again with a rounded stroke to give it a softer appearence. The shadows and the top flap were then created by using the rulers to mark the edges of the envelope and using the straight line tool.</p>          
          <!-- end SVG -->      

          <div class="spacer" />          

          <!-- image of camera -->
          <div class="row">
            <div class="col-sm-4 report-image">
              <a href="images/icons/camera.svg" title="SVG camera (displayed as PNG)"><img class="report-image" src="images/icons/camera.png" alt="SVG camera (displayed as PNG)"></img></a>
            </div>
          </div>
          <p><span class="text-muted">You can click on the image for a higher resolution.</span></p>
          <!-- end image -->

          <div class="spacer" />

          <!-- GIMP -->
          <h4><a id="gimp" class="anchor">GIMP</a></h4>
          <p>envelope, pictures of me and josh</p>
        </div>
        <!-- end of Website Content -->

          <div class="spacer" />          

        <!-- image of camera -->
        <div class="row">
          <div class="col-sm-4 report-image">
            <a href="images/report/gimp.png" title="Screenshot of Contact page with GIMP images"><img class="report-image" src="images/report/gimp.png" alt="creenshot of Contact page with GIMP images"></img></a>
          </div>
        </div>
        <p><span class="text-muted">You can click on the image for a higher resolution.</span></p>
        <!-- end image -->

        <span class="text-muted">Back to <a href="#top">top</a></span>
        <hr />

        <!-- Everything Else -->
        <div>
          <h3><a id="ee" class="anchor">Everything Else</a></h3>
          <p>When we distributed the work, we initially decided that Luke was to undertake the look and feel of the application, along with lots of the content, whereas Josh was to become familiar with Angular JS and work on the application framework. This stayed large true throughout the project, however, as we expected, we often turned our hands to help the other person. As such, we feel that we have both contributed evenly and fairly to this project and request that our marks be weighted identically as such.</p>
        </div>
        <!-- end of Everything Else -->

        <span class="text-muted">Back to <a href="#top">top</a></span>
      </div>
    </div>
  </body>
</html>
